<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: MCSPI Low Level Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DRIVERS_MCSPI_LLD_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MCSPI Low Level Driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_components_drivers_mcspi_lld"></a> </p>
<h1><a class="anchor" id="autotoc_md1846"></a>
Features Supported</h1>
<ul>
<li>Controller and Peripheral mode of operation</li>
<li>Per transfer selection of different channels/chip select</li>
<li>Non-blocking (Callback) transfers</li>
<li>Multi Word Acess. To use this feature, following requirement must be satisfied.<ul>
<li>It is only supported in interrupt mode.</li>
<li>The channel selected must have the FIFO enabled.</li>
<li>Transmit and receive registers must write and read 32-bits respectively.</li>
<li>FIFO Trigger level must be 32 bit aligned i.e, It must be in power of 2.</li>
<li>Data Size must be 8 bits or 1 byte.</li>
<li>Total frame i.e spiTransaction.count must be in multiple of data size.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1847"></a>
Features NOT Supported</h1>
<ul>
<li>For MCU domain instances, DMA mode is not supported.</li>
<li>Default TX data feature is not supported in DMA mode.</li>
<li>In DMA mode, FIFO is not enabled.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1848"></a>
Constraint</h1>
<ul>
<li>Due to the design constraint maximum DMA PKTDMA_0 TX/RX channels each can be used is 3 per R5F core. So in case of MCSPI instance with DMA mode enabled can use atmost 3 CS in multi-controller mode.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1849"></a>
Usage Overview</h1>
<h2><a class="anchor" id="autotoc_md1850"></a>
API Sequence</h2>
<p>To use the MCSPI driver to send data over the SPI bus, the application calls the following APIs:</p>
<ul>
<li><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa" title="This API Initializes the McSPI instance.">MCSPI_lld_init()</a>: Initialize the MCSPI driver.</li>
<li><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga88c80bbad2d6a7c56afe2831076d6291" title="This API reads writes data from the McSPI instance in polling mode.">MCSPI_lld_readWrite()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gaae53dbc6ef93d5d1bb5bd20bd7117e95" title="This API reads writes data from the McSPI instance in Interrupt mode.">MCSPI_lld_readWriteIntr()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gaae2d0e9af00185a61a45e225c733270c" title="This API reads writes data from the McSPI instance in DMA mode.">MCSPI_lld_readWriteDma()</a>: Read and Write data in polling, interrupt, and Dma mode respectively.</li>
<li><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga27af238014f7f4b5ed22d825a0674388" title="This API reads data from the McSPI instance in Polling mode.">MCSPI_lld_read()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga5778f499f3a83e6cd19bb125946c02d8" title="This API reads data from the McSPI instance in Interrupt mode.">MCSPI_lld_readIntr()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga67a726475e759359dad263391b261a67" title="This API reads data from the McSPI instance in DMA mode.">MCSPI_lld_readDma()</a>: Read data in polling, interrupt, and Dma mode respectively.</li>
<li><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga3dda2e27f59455e8f026a9e879fd2530" title="This API writes data to the McSPI instance in Polling mode.">MCSPI_lld_write()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga10b4f7a1cd024c5173f90d29a01c979d" title="This API writes data to the McSPI instance in Interrupt mode.">MCSPI_lld_writeIntr()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gab3e0972265038d40e593247560f0130d" title="This API writes data to the McSPI instance in DMA mode.">MCSPI_lld_writeDma()</a>: Write data in polling, interrupt, and Dma mode respectively.</li>
<li><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga451aba2b1ca0c8ccb3547f7598129a3f" title="This API De-Initializes the McSPI instance.">MCSPI_lld_deInit()</a>: De-initialize the MCSPI instance.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1851"></a>
Initializing the MCSPI Driver</h2>
<p><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa" title="This API Initializes the McSPI instance.">MCSPI_lld_init()</a> must be called before any other MCSPI APIs. This function iterates till the channel count. This function uses mcspi handle to initialize each instance. Calling <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa" title="This API Initializes the McSPI instance.">MCSPI_lld_init()</a> a second time with the same handle previously passed to <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa" title="This API Initializes the McSPI instance.">MCSPI_lld_init()</a> will result in an error. You can, though, re-use the handle if the instance is closed via <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga451aba2b1ca0c8ccb3547f7598129a3f" title="This API De-Initializes the McSPI instance.">MCSPI_lld_deInit()</a>. In DMA mode, <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gaea24ce76bb749be2cbf07a5e361322a7" title="This API Initializes the McSPI instance in DMA Mode.">MCSPI_lld_initDma()</a> needs to be called instead of <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa" title="This API Initializes the McSPI instance.">MCSPI_lld_init()</a> to acquire and initialize mcspi instance. Please note that initializing MCSPI driver is taken care by the SysConfig generated code.</p>
<h2><a class="anchor" id="autotoc_md1852"></a>
MCSPI Transfer Mode</h2>
<p>The MCSPI driver supports three transfer modes of operation: Interrupt, Polling and DMA Mode. Interrupt and DMA mode, it supports only callback mode. Once a MCSPI driver is opened, the only way to change the operation mode is to close and re-open the MCSPI instance with the new transfer mode.</p>
<p>In callback mode, a MCSPI transaction functions asynchronously, which means that it does not block code execution. After a MCSPI transaction has been completed, the MCSPI driver calls a user-provided hook function. Callback mode is supported in the execution context of tasks and hardware interrupt routines.</p>
<p>In multichannel mode connected to multiple external devices, the MCSPI exchanges data with one MCSPI device at a time and FIFO is enabled per each channel at a time.</p>
<p>NOTE: The size of txBuf and RxBuf must be greater than the data size bits, if data size is not a multiple of 8 bits. Mask the data size bits in txBuf and rxBuf as the remaining bits will be discarded. For example, consider datasize = 18 bits then txBuf and rxBuf size should be uint32_t and the mask bits should be 0x3FFFF.</p>
<h1><a class="anchor" id="autotoc_md1853"></a>
Important Usage Guidelines</h1>
<ul>
<li>The MCSPI protocol does not account for a built-in handshaking mechanism and neither does this driver. Therefore, when operating in <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga1447ffe86b17d95258dcad6594a3f0a9" title="The module receives the clock and CS.">MCSPI_MS_MODE_PERIPHERAL</a> mode, the application must provide such a mechanism to ensure that the MCSPI peripheral is ready for the MCSPI controller. The MCSPI peripheral must call <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#ga88c80bbad2d6a7c56afe2831076d6291" title="This API reads writes data from the McSPI instance in polling mode.">MCSPI_lld_readWrite()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gaae53dbc6ef93d5d1bb5bd20bd7117e95" title="This API reads writes data from the McSPI instance in Interrupt mode.">MCSPI_lld_readWriteIntr()</a> / <a class="el" href="group__DRV__MCSPI__LLD__MODULE.html#gaae2d0e9af00185a61a45e225c733270c" title="This API reads writes data from the McSPI instance in DMA mode.">MCSPI_lld_readWriteDma()</a> <em>before</em> the controller starts transmitting. Some example application mechanisms could include:<ul>
<li>Timed delays on the MCSPI controller to guarantee the MCSPI peripheral is ready for a MCSPI transaction.</li>
<li>A form of GPIO flow control from the peripheral to the MCSPI controller to notify the controller when ready.</li>
</ul>
</li>
<li>In case of DMA mode, as R5F core is not Cache Coherent, Cache Writeback is required if R5F writes to the buffers. And before reading the buffers, application needs to invalidate those. Please refer <a class="el" href="EXAMPLES_DRIVERS_MCSPI_LOOPBACK_DMA_LLD.html">MCSPI Loopback DMA LLD</a>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1854"></a>
Example Usage</h1>
<p>Include the below file to access the APIs </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="DebugP_8h.html">kernel/dpl/DebugP.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="SystemP_8h.html">kernel/dpl/SystemP.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="SemaphoreP_8h.html">kernel/dpl/SemaphoreP.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="HwiP_8h.html">kernel/dpl/HwiP.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;kernel/dpl/MutexArmP.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;kernel/nortos/dpl/r5/HwiP_armv7r_vim.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mcspi__lld_8h.html">drivers/mcspi/v0/lld/mcspi_lld.h</a>&gt;</span></div>
</div><!-- fragment --><p> Instance Open Example </p><div class="fragment"><div class="line">    int32_t status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>;</div>
<div class="line">    gMcspiHandle0 = &amp;gMcspiObject[CONFIG_MCSPI0];</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa">MCSPI_lld_init</a>(gMcspiHandle0);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>);</div>
<div class="line"> </div>
</div><!-- fragment --><p> Instance Close Example </p><div class="fragment"><div class="line">    int32_t status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>;</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#ga451aba2b1ca0c8ccb3547f7598129a3f">MCSPI_lld_deInit</a>(gMcspiHandle0);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>);</div>
</div><!-- fragment --><p> Non-Blocking Transfer Example </p><div class="fragment"><div class="line">    uint32_t              bufIndex;</div>
<div class="line">    uint32_t              <a class="code" href="tisci__rm__ra_8h.html#a86988a65e0d3ece7990c032c159786d6">count</a>;</div>
<div class="line">    uint32_t              timeout = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gabaa888ef531c9dda317b001044627a41">MCSPI_WAIT_FOREVER</a>;</div>
<div class="line">    int32_t               status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structMCSPI__ExtendedParams.html">MCSPI_ExtendedParams</a>  extendedParams;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*  Interrupt configuration and registration*/</span></div>
<div class="line">    intrNum = gConfigMcspi0InitObject[CONFIG_MCSPI0].intrNum;</div>
<div class="line">    gMcspiVimStsAddr = gVimBaseAddr + (0x404u + (((intrNum)&gt;&gt; 5) &amp; 0xFu) * 0x20u);</div>
<div class="line">    gMcspiVimStsClrMask = 0x1u &lt;&lt; ((intrNum) &amp; 0x1Fu);</div>
<div class="line"> </div>
<div class="line">    HwiP_setVecAddr(intrNum, (uintptr_t)&amp;App_MCSPI_ISR);</div>
<div class="line">    HwiP_setPri(intrNum, gConfigMcspi0InitObject[CONFIG_MCSPI0].intrPriority);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__HWI.html#gaccf47c6fb95111f0fbba1b86705d5907">HwiP_enableInt</a>(intrNum);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(status == <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;\n[MCSPI] Loopback example started ...\r\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Memfill buffers */</span></div>
<div class="line">        <span class="keywordflow">for</span>(bufIndex = 0U; bufIndex &lt; APP_MCSPI_MSGSIZE; bufIndex++)</div>
<div class="line">        {</div>
<div class="line">            gMcspiTxBuffer[bufIndex] = bufIndex;</div>
<div class="line">            gMcspiRxBuffer[bufIndex] = 0U;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        gMcspiObject[CONFIG_MCSPI0].transferMutex = &amp;gMutexLockUnlock;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* populate extended parameters */</span></div>
<div class="line">        extendedParams.channel    = 0;</div>
<div class="line">        extendedParams.csDisable  = TRUE;</div>
<div class="line">        extendedParams.dataSize   = 32;</div>
<div class="line">        <a class="code" href="tisci__rm__ra_8h.html#a86988a65e0d3ece7990c032c159786d6">count</a> = APP_MCSPI_MSGSIZE / (extendedParams.dataSize/8);</div>
<div class="line"> </div>
<div class="line">        status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gaae53dbc6ef93d5d1bb5bd20bd7117e95">MCSPI_lld_readWriteIntr</a>(gMcspiHandle0, \</div>
<div class="line">                                         gMcspiTxBuffer, \</div>
<div class="line">                                         &amp;gMcspiRxBuffer, \</div>
<div class="line">                                         <a class="code" href="tisci__rm__ra_8h.html#a86988a65e0d3ece7990c032c159786d6">count</a>, \</div>
<div class="line">                                         timeout, \</div>
<div class="line">                                         &amp;extendedParams);</div>
<div class="line">        <span class="keywordflow">while</span>(try_lock_mutex(gMcspiObject[CONFIG_MCSPI0].transferMutex) == MUTEX_ARM_LOCKED);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gaeb7c93069850e87483265149069539d1">MCSPI_TRANSFER_COMPLETED</a> != status)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(FALSE); <span class="comment">/* MCSPI transfer failed!! */</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* Compare data */</span></div>
<div class="line">            <span class="keywordflow">for</span>(bufIndex = 0U; bufIndex &lt; APP_MCSPI_MSGSIZE; bufIndex++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(gMcspiTxBuffer[bufIndex] != gMcspiRxBuffer[bufIndex])</div>
<div class="line">                {</div>
<div class="line">                    status = <a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#ga18a0f0705c041e22f8abcdf77cd6e3dd">MCSPI_STATUS_FAILURE</a>;   <span class="comment">/* Data mismatch */</span></div>
<div class="line">                    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;Data Mismatch at offset %d\r\n&quot;</span>, bufIndex);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Deregister IRQ */</span></div>
<div class="line">    HwiP_setVecAddr(intrNum, 0);</div>
<div class="line">    HwiP_setPri(intrNum, 15);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a> == status)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;All tests have passed!!\r\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;Some tests have failed!!\r\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
</div><!-- fragment --><p> Non-Blocking Example transfer callback </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MCSPI_lld_transferCallback(<span class="keywordtype">void</span> *args, uint32_t transferStatus)</div>
<div class="line">{</div>
<div class="line">    unlock_mutex(gMcspiObject[CONFIG_MCSPI0].transferMutex);</div>
<div class="line">}</div>
</div><!-- fragment --><p> Non-Blocking Example ISR CALL callback </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group__tisci__boardcfg.html#ga57138dae4c1d6449a21591300705a7a0">__attribute__</a>((__section__(<span class="stringliteral">&quot;.text.hwi&quot;</span>), noinline, naked, target(<span class="stringliteral">&quot;arm&quot;</span>), aligned(4))) void App_MCSPI_ISR(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ISR_CALL_LEVEL_NONFLOAT_REENTRANT(<a class="code" href="group__DRV__MCSPI__LLD__MODULE.html#ga4dfee07f911b5fe9c459309906e50ee9">MCSPI_lld_controllerIsr</a>, \</div>
<div class="line">                                      gMcspiHandle0, \</div>
<div class="line">                                      intrNum, \</div>
<div class="line">                                      gMcspiVimStsAddr, \</div>
<div class="line">                                      gMcspiVimStsClrMask,</div>
<div class="line">                                      gVimBaseAddr);</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md1855"></a>
API</h1>
<p><a class="el" href="group__DRV__MCSPI__LLD__MODULE.html">APIs for MCSPI LLD</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_gabaa888ef531c9dda317b001044627a41"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#gabaa888ef531c9dda317b001044627a41">MCSPI_WAIT_FOREVER</a></div><div class="ttdeci">#define MCSPI_WAIT_FOREVER</div><div class="ttdoc">Value to use when needing a timeout of infinity or wait forver until resource is available.</div><div class="ttdef"><b>Definition:</b> mcspi_lld.h:125</div></div>
<div class="ttc" id="aSystemP_8h_html"><div class="ttname"><a href="SystemP_8h.html">SystemP.h</a></div></div>
<div class="ttc" id="atisci__rm__ra_8h_html_a86988a65e0d3ece7990c032c159786d6"><div class="ttname"><a href="tisci__rm__ra_8h.html#a86988a65e0d3ece7990c032c159786d6">count</a></div><div class="ttdeci">uint32_t count</div><div class="ttdef"><b>Definition:</b> tisci_rm_ra.h:6</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_ga4dfee07f911b5fe9c459309906e50ee9"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#ga4dfee07f911b5fe9c459309906e50ee9">MCSPI_lld_controllerIsr</a></div><div class="ttdeci">void MCSPI_lld_controllerIsr(void *args)</div><div class="ttdoc">This is the McSPI Controller ISR and can be used as IRQ handler in Controller mode.</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_gae230587fef6fd89cb1d2e7dcda50d269"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#gae230587fef6fd89cb1d2e7dcda50d269">MCSPI_STATUS_SUCCESS</a></div><div class="ttdeci">#define MCSPI_STATUS_SUCCESS</div><div class="ttdoc">Return status when the API execution was successful.</div><div class="ttdef"><b>Definition:</b> mcspi_lld.h:85</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_gaae53dbc6ef93d5d1bb5bd20bd7117e95"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#gaae53dbc6ef93d5d1bb5bd20bd7117e95">MCSPI_lld_readWriteIntr</a></div><div class="ttdeci">int32_t MCSPI_lld_readWriteIntr(MCSPILLD_Handle hMcspi, void *txBuf, void *rxBuf, uint32_t count, uint32_t timeout, const MCSPI_ExtendedParams *extendedParams)</div><div class="ttdoc">This API reads writes data from the McSPI instance in Interrupt mode.</div></div>
<div class="ttc" id="aSemaphoreP_8h_html"><div class="ttname"><a href="SemaphoreP_8h.html">SemaphoreP.h</a></div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_gaeb7c93069850e87483265149069539d1"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#gaeb7c93069850e87483265149069539d1">MCSPI_TRANSFER_COMPLETED</a></div><div class="ttdeci">#define MCSPI_TRANSFER_COMPLETED</div><div class="ttdef"><b>Definition:</b> mcspi_lld.h:191</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_gafe348ab5badd2c15118f95e21bb192c6"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a></div><div class="ttdeci">#define DebugP_log(format,...)</div><div class="ttdoc">Function to log a string to the enabled console.</div><div class="ttdef"><b>Definition:</b> DebugP.h:225</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_gabfecd1b6519b00bd0a6fff7e88bdf6aa"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#gabfecd1b6519b00bd0a6fff7e88bdf6aa">MCSPI_lld_init</a></div><div class="ttdeci">int32_t MCSPI_lld_init(MCSPILLD_Handle hMcspi)</div><div class="ttdoc">This API Initializes the McSPI instance.</div></div>
<div class="ttc" id="aHwiP_8h_html"><div class="ttname"><a href="HwiP_8h.html">HwiP.h</a></div></div>
<div class="ttc" id="agroup__tisci__boardcfg_html_ga57138dae4c1d6449a21591300705a7a0"><div class="ttname"><a href="group__tisci__boardcfg.html#ga57138dae4c1d6449a21591300705a7a0">__attribute__</a></div><div class="ttdeci">struct tisci_boardcfg_sa2ul_cfg __attribute__</div><div class="ttdoc">UInteger224 (802.1AS, 10.3.4 time-synchronization spanning tree priority vectors )</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__HWI_html_gaccf47c6fb95111f0fbba1b86705d5907"><div class="ttname"><a href="group__KERNEL__DPL__HWI.html#gaccf47c6fb95111f0fbba1b86705d5907">HwiP_enableInt</a></div><div class="ttdeci">void HwiP_enableInt(uint32_t intNum)</div><div class="ttdoc">Enable a specific interrupt.</div></div>
<div class="ttc" id="astructMCSPI__ExtendedParams_html"><div class="ttname"><a href="structMCSPI__ExtendedParams.html">MCSPI_ExtendedParams</a></div><div class="ttdoc">Data structure used with MCSPI_lld_read(), MCSPI_lld_readIntr(), MCSPI_lld_readDma(),...</div><div class="ttdef"><b>Definition:</b> mcspi_lld.h:535</div></div>
<div class="ttc" id="amcspi__lld_8h_html"><div class="ttname"><a href="mcspi__lld_8h.html">mcspi_lld.h</a></div><div class="ttdoc">MCSPI LLD Driver API/interface file.</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_ga451aba2b1ca0c8ccb3547f7598129a3f"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#ga451aba2b1ca0c8ccb3547f7598129a3f">MCSPI_lld_deInit</a></div><div class="ttdeci">int32_t MCSPI_lld_deInit(MCSPILLD_Handle hMcspi)</div><div class="ttdoc">This API De-Initializes the McSPI instance.</div></div>
<div class="ttc" id="aDebugP_8h_html"><div class="ttname"><a href="DebugP_8h.html">DebugP.h</a></div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_ga552e9055ca7eab5fe6c224c6cd5a9d4c"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a></div><div class="ttdeci">#define DebugP_assert(expression)</div><div class="ttdoc">Function to call for assert check.</div><div class="ttdef"><b>Definition:</b> DebugP.h:177</div></div>
<div class="ttc" id="agroup__DRV__MCSPI__LLD__MODULE_html_ga18a0f0705c041e22f8abcdf77cd6e3dd"><div class="ttname"><a href="group__DRV__MCSPI__LLD__MODULE.html#ga18a0f0705c041e22f8abcdf77cd6e3dd">MCSPI_STATUS_FAILURE</a></div><div class="ttdeci">#define MCSPI_STATUS_FAILURE</div><div class="ttdoc">Return status when the API execution was not successful due to a failure.</div><div class="ttdef"><b>Definition:</b> mcspi_lld.h:90</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
