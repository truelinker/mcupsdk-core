<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: USB CDC Echo Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_USB_CDC_ECHO.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">USB CDC Echo Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1369">Introduction</a></li>
<li class="level1"><a href="#autotoc_md1370">USB Logging Template Example</a></li>
<li class="level1"><a href="#EXAMPLES_USB_CDC_ECHO_EXAMPLE_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md1371">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md1372">Build the example</a></li>
<li class="level2"><a href="#autotoc_md1373">HW Setup</a></li>
<li class="level2"><a href="#autotoc_md1374">Run the example</a><ul><li class="level3"><a href="#autotoc_md1375">For Window 10</a></li>
<li class="level3"><a href="#autotoc_md1376">For Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md1377">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_usb_usb_cdc_echo_example"></a></p>
<h1><a class="anchor" id="autotoc_md1369"></a>
Introduction</h1>
<p>This example is a USB device CDC-ACM application based on USB CDC class from TinyUSB.</p>
<p>The example does the below</p><ul>
<li>Initializes the TinyUSB USB core driver and CDC class</li>
<li>Create two virtual COM ports visible to an USB host</li>
<li>Any alphabetic input from the USB host will be echo-ed back in lower case on one COM and in upper case in the other COM port</li>
</ul>
<h1><a class="anchor" id="autotoc_md1370"></a>
USB Logging Template Example</h1>
<ul>
<li>This example also demonstrate how to enable logging for USB using shared memory log feature.<ul>
<li>The R5FSS0_0_freertos/nortos core will write logs in the shared memory and R5FSS0_1_freertos/nortos core will read and print it on UART0.</li>
</ul>
</li>
<li>see <a class="el" href="USB_DEVICE_DRIVER.html">USB</a> for more information on how to enable USB logs.</li>
<li>see <a class="el" href="KERNEL_DPL_DEBUG_PAGE.html">Debug</a> for more information on how to enable shared memory log feature.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Enabling logs in debug build may lead to unwanted behaviour as the application code is build with -O0 flag.</li>
<li>It is recomended to use <b>release</b> build when USB logging is enabled.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="EXAMPLES_USB_CDC_ECHO_EXAMPLE_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0_freertos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss0_1_freertos log Reader   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">r5fss0-0_nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss0-1_nortos log Reader   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am64x-evm   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/usb/device/cdc_echo   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1371"></a>
Steps to Run the Example</h1>
<h2><a class="anchor" id="autotoc_md1372"></a>
Build the example</h2>
<ul>
<li>When using CCS projects to build, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li>When using makefiles to build, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1373"></a>
HW Setup</h2>
<ul>
<li>To test the application, one can use a Windows/Linux PC as a USB host</li>
<li>Connect the J24 on AM64x/AM243x EVM to the USB host</li>
</ul>
<p> <style>div.image img[src="am64x_am243x_evm_j24.png"]{width:30%}</style> </p><div class="image">
<img src="am64x_am243x_evm_j24.png" alt=""/>
<div class="caption">
USB 2.0 Host/Device Connector</div></div>
<h2><a class="anchor" id="autotoc_md1374"></a>
Run the example</h2>
<ul>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>When the application is running, two COM ports will be enumerated on the USB host</li>
</ul>
<h3><a class="anchor" id="autotoc_md1375"></a>
For Window 10</h3>
<ul>
<li>The two enumerated COM ports can be displayed using the Device Manager on Windows 10,</li>
</ul>
<p> <style>div.image img[src="usb_cdc_echo_example_enum.png"]{width:50%}</style> </p><div class="image">
<img src="usb_cdc_echo_example_enum.png" alt=""/>
<div class="caption">
COM ports (COM3 and COM4) displayed using Deveice Manager</div></div>
<ul>
<li>On USB host, use any serial port communication program, like Tera Term, to connect to those two COM ports</li>
</ul>
<p> <style>div.image img[src="usb_cdc_echo_example_com3.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_example_com3.png" alt=""/>
<div class="caption">
Using Tera Term to connect to port 1</div></div>
<p> <style>div.image img[src="usb_cdc_echo_example_com4.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_example_com4.png" alt=""/>
<div class="caption">
Using Tera Term to connect to port 2</div></div>
<ul>
<li>Type in any alphabetic characters, the lower case of the input will be displayed on one COM port and the upper case of the input will be displayed on the other COM port</li>
</ul>
<p> <style>div.image img[src="usb_cdc_echo_example_lower.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_example_lower.png" alt=""/>
<div class="caption">
Lower Case Input Echo-ed</div></div>
<p> <style>div.image img[src="usb_cdc_echo_example_upper.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_example_upper.png" alt=""/>
<div class="caption">
Upper Case Input Echo-ed</div></div>
<h3><a class="anchor" id="autotoc_md1376"></a>
For Linux</h3>
<ul>
<li>The two enumerated serial ports can be enumerated as "/dev/ttyACM0" and "/dev/ttyACM1"</li>
<li>On Linux, one has to change the access right for those two serial ports as shown below.</li>
<li>Then use any serial port communication program, like putty, to connect to those two serial ports</li>
</ul>
<p> <style>div.image img[src="usb_cdc_echo_linux_ttyacm0.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_linux_ttyacm0.png" alt=""/>
<div class="caption">
Using putty to connect to port 1</div></div>
<p> <style>div.image img[src="usb_cdc_echo_linux_ttyacm1.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_linux_ttyacm1.png" alt=""/>
<div class="caption">
Using putty to connect to port 2</div></div>
<ul>
<li>Type in any alphabetic characters, the lower case of the input will be displayed on one COM port and the upper case of the input will be displayed on the other COM port</li>
</ul>
<p> <style>div.image img[src="usb_cdc_echo_linux_lower.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_linux_lower.png" alt=""/>
<div class="caption">
Lower Case Input Echo-ed</div></div>
<p> <style>div.image img[src="usb_cdc_echo_linux_upper.png"]{width:30%}</style> </p><div class="image">
<img src="usb_cdc_echo_linux_upper.png" alt=""/>
<div class="caption">
Upper Case Input Echo-ed</div></div>
<h1><a class="anchor" id="autotoc_md1377"></a>
See Also</h1>
<p><a class="el" href="USB_DEVICE_DRIVER.html">USB</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
