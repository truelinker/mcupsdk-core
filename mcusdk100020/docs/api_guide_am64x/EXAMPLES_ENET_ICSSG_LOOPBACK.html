<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Enet ICSSG Loopback Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_ENET_ICSSG_LOOPBACK.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Enet ICSSG Loopback Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1265">Introduction</a></li>
<li class="level1"><a href="#autotoc_md1266">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md1267">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md1268">Build the example</a></li>
<li class="level2"><a href="#autotoc_md1269">Sample output for PHY Loopback</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md1270">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_networking_enet_icssg_loopback_example"></a></p>
<h1><a class="anchor" id="autotoc_md1265"></a>
Introduction</h1>
<p>This example exercises the PHY loopback functionality of the external PHY (layer1) SoC. The ICSSG peripheral is opened with ethernet initialization (in MAC only mode) parameters and the PHY loopback is enabled. Note that ICSSG pheripheral does not support MAC loopback mode, unlike CPSW.</p>
<p>On AM64X, we can do ethernet based communication using ICSSG Hardware peripheral</p><ul>
<li>ICSS<ul>
<li>This is a firmware enabled ethernet switch + port HW</li>
<li>This HW can be used with industrial communication protocols as well</li>
<li>In this example we use ICSS as a standard ethernet port</li>
</ul>
</li>
</ul>
<p>The examples do below</p><ul>
<li>A Tx channel and a Rx flow are opened to enable data transfers. Packets are transmitted from the Switch R5F (Main R5F0_0) to the host port using the Tx channel. These packets are routed back to the host port by the switch hardware as the internal loopback feature is enabled. These packets are then transmitted to the Switch R5F by the Rx flow and the application is notified.</li>
<li>The Tx and Rx functions in the example are set to transmit and receive 1000 packets. After reaching the count of 1000, the application closes the Tx channel, Rx flow, ICSSG and restarts the application for a configurable number of times. Restarting the loopback test application ensures that there arenâ€™t any memory leaks, and the hardware is closed properly and can be reopened any time.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1266"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0_nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am64x-evm   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/networking/enet_loopback/enet_icssg_loopback   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1267"></a>
Steps to Run the Example</h1>
<h2><a class="anchor" id="autotoc_md1268"></a>
Build the example</h2>
<ul>
<li>When using CCS projects to build, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li>When using makefiles to build, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1269"></a>
Sample output for PHY Loopback</h2>
<div class="fragment"><div class="line">=============================</div>
<div class="line"> Enet Loopback: Iteration 1 </div>
<div class="line">=============================</div>
<div class="line">ICSSG_DUALMAC Test</div>
<div class="line">Enabling clocks!</div>
<div class="line"> </div>
<div class="line">Init  configs EnetType:1, InstId :3</div>
<div class="line">----------------------------------------------</div>
<div class="line">Mdio_open: MDIO Manual_Mode enabled</div>
<div class="line">EnetPhy_bindDriver: PHY 15: OUI:080028 Model:0f Ver:01 &lt;-&gt; &#39;dp83869&#39; : OK</div>
<div class="line">PHY 3 is alive</div>
<div class="line">PHY 15 is alive</div>
<div class="line">initQs() txFreePktInfoQ initialized with 16 pkts</div>
<div class="line"> </div>
<div class="line"> - HOST PORT statistics</div>
<div class="line">--------------------------------</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> Mac 1 statistics</div>
<div class="line">--------------------------------</div>
<div class="line"> </div>
<div class="line">Icssg_handleLinkUp: icssg1-2: Port 2: Link up: 100-Mbps Full-Duplex</div>
<div class="line">completed</div>
<div class="line"> </div>
<div class="line"> - HOST PORT statistics</div>
<div class="line">--------------------------------</div>
<div class="line">  hostRxByteCnt              = 518000</div>
<div class="line">  hostTxByteCnt              = 514000</div>
<div class="line">  hostRxPktCnt               = 1000</div>
<div class="line">  hostTxPktCnt               = 1000</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> Mac 1 statistics</div>
<div class="line">--------------------------------</div>
<div class="line">  rxGoodFrames            = 1000</div>
<div class="line">  rxBCastFrames           = 1000</div>
<div class="line">  rxMCastFrames           = 1000</div>
<div class="line">  rxClass8                = 1000</div>
<div class="line">  rxClass9                = 1000</div>
<div class="line">  rxBucket5SizedFrame     = 1000</div>
<div class="line">  rxTotalByte             = 518000</div>
<div class="line">  rxTxTotalByte           = 1044000</div>
<div class="line">  txGoodFrame             = 1000</div>
<div class="line">  txBcastFrame            = 1000</div>
<div class="line">  txMcastFrame            = 1000</div>
<div class="line">  txBucket5SizedFrame     = 1000</div>
<div class="line">  txTotalByte             = 526000</div>
<div class="line"> </div>
<div class="line">Icssg_unregisterEventCb: icssg1-2: event not registered 1</div>
<div class="line">Unregister TX timestamp callback</div>
<div class="line">Icssg_unregisterEventCb: icssg1-2: event not registered 64</div>
<div class="line">Icssg_handleLinkDown: icssg1-2: Port 2: Link down</div>
<div class="line">Disabling clocks for ENET: 1, inst:3!</div>
<div class="line">Test complete: PASS</div>
<div class="line">Loopback application completed</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1270"></a>
See Also</h1>
<p><a class="el" href="NETWORKING.html">Ethernet And Networking</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
