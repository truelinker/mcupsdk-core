<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: SOC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DRIVERS_SOC_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SOC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1952">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md1953">SysConfig Features</a></li>
<li class="level1"><a href="#autotoc_md1954">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md1955">Important Usage Guidelines</a></li>
<li class="level1"><a href="#autotoc_md1956">Example Usage</a></li>
<li class="level1"><a href="#autotoc_md1957">API</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_device_am64x_am243x_soc"></a></p>
<p>The SOC driver provides API to configure SOC specific features like clocks.</p>
<h1><a class="anchor" id="autotoc_md1952"></a>
Features Supported</h1>
<ul>
<li>API to enable/disable a module clock</li>
<li>API to set clock frequency for module</li>
<li>Generic utility API like get CPU clock, get core name string, control module MMR lock/unlock API</li>
<li>Address Translation APIs for all the R5F cores</li>
<li>SOC Software Warm Reset/POR Reset APIs</li>
</ul>
<h1><a class="anchor" id="autotoc_md1953"></a>
SysConfig Features</h1>
<ul>
<li>SOC driver is integrated with each of the drivers. User need not perform any explicit configuration for this driver</li>
</ul>
<h1><a class="anchor" id="autotoc_md1954"></a>
Features NOT Supported</h1>
<p>NA</p>
<h1><a class="anchor" id="autotoc_md1955"></a>
Important Usage Guidelines</h1>
<ul>
<li>Most of these APIs are already integrated with SysConfig tool and the generated code does the required call to enable a module, set the required clock and so on. User need to use these APIs in their application only for exceptional scenarios.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="group__DRV__SOC__MODULE.html#ga38a189038389b315104384f5d591cae8">SOC_controlModuleLockMMR</a> API will be ineffective in the case of AM64x SOC, since AM64x is mostly used in conjunction with Linux, and the linux kernel assumes MMRs to be unlocked. This is protected with a <code>#if</code> statement in the SOC driver. Please remove this condition if the SDK is used without linux.</dd></dl>
<ul>
<li>All MCU domain resets act as a main reset to the whole device. (MAIN and MCU domains)</li>
<li>MAIN domain resets will only reset the MAIN domain.</li>
<li>Please refer "Reset" chapter in techical reference manual for more details.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1956"></a>
Example Usage</h1>
<p>Include the below file to access the APIs </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;drivers/soc.h&gt;</span></div>
</div><!-- fragment --><p> Get Core Name String </p><div class="fragment"><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *coreName;</div>
<div class="line"> </div>
<div class="line">    coreName = <a class="code" href="group__DRV__SOC__MODULE.html#ga56fa202291d97fe899178305711fedf6">SOC_getCoreName</a>(<a class="code" href="cslr__soc__defines_8h.html#a822173b770be26a93c3bec07938fe6d8">CSL_CORE_ID_R5FSS0_0</a>);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;Core name is: %s\r\n&quot;</span>, coreName);</div>
</div><!-- fragment --><p> Get CPU Clock Frequency </p><div class="fragment"><div class="line">    uint64_t cpuClockRate;</div>
<div class="line"> </div>
<div class="line">    cpuClockRate = <a class="code" href="group__DRV__SOC__MODULE.html#ga33bb19e70642cf4aa8bfab89b52b49d6">SOC_getSelfCpuClk</a>();</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;CPU Clock Frequency: %u\r\n&quot;</span>, cpuClockRate);</div>
</div><!-- fragment --><p> Set CPU Clock Frequency </p><div class="fragment"><div class="line"><span class="preprocessor">    #include &lt;<a class="code" href="sciclient_8h.html">drivers/sciclient.h</a>&gt;</span> <span class="comment">/* For the device and clock macros */</span></div>
<div class="line"> </div>
<div class="line">    uint32_t moduleId = <a class="code" href="group__tisci__devices.html#gae7cab86c1d5624a38310495239ce8b0b">TISCI_DEV_PRU_ICSSG0</a>;</div>
<div class="line">    uint32_t clkId = <a class="code" href="group__tisci__clocks.html#gab3ae38dc7470ded73bd5e2fa76d206f7">TISCI_DEV_PRU_ICSSG0_CORE_CLK</a>;</div>
<div class="line">    uint64_t clkRate = 300000000U;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__DRV__SOC__MODULE.html#ga608010ad392d6331d0a0519f8424aca7">SOC_moduleSetClockFrequency</a>(moduleId, clkId, clkRate);</div>
</div><!-- fragment --><p> Set CPU Clock Frequency with a specific parent clock </p><div class="fragment"><div class="line"><span class="preprocessor">    #include &lt;<a class="code" href="sciclient_8h.html">drivers/sciclient.h</a>&gt;</span> <span class="comment">/* For the device and clock macros */</span></div>
<div class="line"> </div>
<div class="line">    uint32_t moduleId = <a class="code" href="group__tisci__devices.html#gae7cab86c1d5624a38310495239ce8b0b">TISCI_DEV_PRU_ICSSG0</a>;</div>
<div class="line">    uint32_t clkId = <a class="code" href="group__tisci__clocks.html#gab3ae38dc7470ded73bd5e2fa76d206f7">TISCI_DEV_PRU_ICSSG0_CORE_CLK</a>;</div>
<div class="line">    uint32_t clkParentId = <a class="code" href="group__tisci__clocks.html#ga5cc368f3c687d4bf69782dee507ce61c">TISCI_DEV_PRU_ICSSG0_CORE_CLK_PARENT_HSDIV4_16FFT_MAIN_2_HSDIVOUT0_CLK</a>;</div>
<div class="line">    uint64_t clkRate = 300000000U;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__DRV__SOC__MODULE.html#gab11339d4a492d1fa8db1a2fb5119085f">SOC_moduleSetClockFrequencyWithParent</a>(moduleId, clkId, clkParentId, clkRate);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1957"></a>
API</h1>
<p><a class="el" href="group__DRV__SOC__MODULE.html">APIs for SOC Specific Functions</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="asciclient_8h_html"><div class="ttname"><a href="sciclient_8h.html">sciclient.h</a></div><div class="ttdoc">This file contains prototypes for APIs contained as a part of SCICLIENT as well as the structures of ...</div></div>
<div class="ttc" id="agroup__DRV__SOC__MODULE_html_ga608010ad392d6331d0a0519f8424aca7"><div class="ttname"><a href="group__DRV__SOC__MODULE.html#ga608010ad392d6331d0a0519f8424aca7">SOC_moduleSetClockFrequency</a></div><div class="ttdeci">int32_t SOC_moduleSetClockFrequency(uint32_t moduleId, uint32_t clkId, uint64_t clkRate)</div><div class="ttdoc">Set module clock to specified frequency.</div></div>
<div class="ttc" id="agroup__DRV__SOC__MODULE_html_gab11339d4a492d1fa8db1a2fb5119085f"><div class="ttname"><a href="group__DRV__SOC__MODULE.html#gab11339d4a492d1fa8db1a2fb5119085f">SOC_moduleSetClockFrequencyWithParent</a></div><div class="ttdeci">int32_t SOC_moduleSetClockFrequencyWithParent(uint32_t moduleId, uint32_t clkId, uint32_t clkParent, uint64_t clkRate)</div><div class="ttdoc">Set module clock to specified frequency and with a specific parent.</div></div>
<div class="ttc" id="acslr__soc__defines_8h_html_a822173b770be26a93c3bec07938fe6d8"><div class="ttname"><a href="cslr__soc__defines_8h.html#a822173b770be26a93c3bec07938fe6d8">CSL_CORE_ID_R5FSS0_0</a></div><div class="ttdeci">#define CSL_CORE_ID_R5FSS0_0</div><div class="ttdef"><b>Definition:</b> cslr_soc_defines.h:71</div></div>
<div class="ttc" id="agroup__tisci__clocks_html_gab3ae38dc7470ded73bd5e2fa76d206f7"><div class="ttname"><a href="group__tisci__clocks.html#gab3ae38dc7470ded73bd5e2fa76d206f7">TISCI_DEV_PRU_ICSSG0_CORE_CLK</a></div><div class="ttdeci">#define TISCI_DEV_PRU_ICSSG0_CORE_CLK</div><div class="ttdef"><b>Definition:</b> tisci_clocks.h:627</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_gafe348ab5badd2c15118f95e21bb192c6"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a></div><div class="ttdeci">#define DebugP_log(format,...)</div><div class="ttdoc">Function to log a string to the enabled console.</div><div class="ttdef"><b>Definition:</b> DebugP.h:225</div></div>
<div class="ttc" id="agroup__DRV__SOC__MODULE_html_ga33bb19e70642cf4aa8bfab89b52b49d6"><div class="ttname"><a href="group__DRV__SOC__MODULE.html#ga33bb19e70642cf4aa8bfab89b52b49d6">SOC_getSelfCpuClk</a></div><div class="ttdeci">uint64_t SOC_getSelfCpuClk(void)</div><div class="ttdoc">Get the clock frequency in Hz of the CPU on which the driver is running.</div></div>
<div class="ttc" id="agroup__tisci__clocks_html_ga5cc368f3c687d4bf69782dee507ce61c"><div class="ttname"><a href="group__tisci__clocks.html#ga5cc368f3c687d4bf69782dee507ce61c">TISCI_DEV_PRU_ICSSG0_CORE_CLK_PARENT_HSDIV4_16FFT_MAIN_2_HSDIVOUT0_CLK</a></div><div class="ttdeci">#define TISCI_DEV_PRU_ICSSG0_CORE_CLK_PARENT_HSDIV4_16FFT_MAIN_2_HSDIVOUT0_CLK</div><div class="ttdef"><b>Definition:</b> tisci_clocks.h:628</div></div>
<div class="ttc" id="agroup__tisci__devices_html_gae7cab86c1d5624a38310495239ce8b0b"><div class="ttname"><a href="group__tisci__devices.html#gae7cab86c1d5624a38310495239ce8b0b">TISCI_DEV_PRU_ICSSG0</a></div><div class="ttdeci">#define TISCI_DEV_PRU_ICSSG0</div><div class="ttdef"><b>Definition:</b> tisci_devices.h:133</div></div>
<div class="ttc" id="agroup__DRV__SOC__MODULE_html_ga56fa202291d97fe899178305711fedf6"><div class="ttname"><a href="group__DRV__SOC__MODULE.html#ga56fa202291d97fe899178305711fedf6">SOC_getCoreName</a></div><div class="ttdeci">const char * SOC_getCoreName(uint16_t coreId)</div><div class="ttdoc">Convert a core ID to a user readable name.</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
