<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Programming</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('COMPONENT_PRU_GUIDE_PROG.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Programming </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2172">PRU Firmware Development</a><ul><li class="level2"><a href="#autotoc_md2173">Supported Languages</a></li>
<li class="level2"><a href="#autotoc_md2174">Example Project</a></li>
<li class="level2"><a href="#autotoc_md2175">Building Project</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2176">PRU-ICSS Driver APIs (- R5F side)</a><ul><ul><li class="level3"><a href="#autotoc_md2177">Overview of APIs</a></li>
</ul>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_pru_io_pru_guide_prog"></a></p>
<h1><a class="anchor" id="autotoc_md2172"></a>
PRU Firmware Development</h1>
<h2><a class="anchor" id="autotoc_md2173"></a>
Supported Languages</h2>
<p>PRU firmware may be written in C code, or in assembly code, or can be a combination of both in a single example.</p>
<p>Refer for in detail reference:</p><ul>
<li>Instructions available: <a href="https://www.ti.com/lit/ug/spruij2/spruij2.pdf">PRU Assembly Instruction User Guide</a></li>
<li>Assembly Coding: <a href="https://www.ti.com/lit/ug/spruhv6c/spruhv6c.pdf">PRU Assembly Language Tools</a></li>
<li>C Coding: <a href="https://www.ti.com/lit/ug/spruhv7c/spruhv7c.pdf">PRU Optimizing C/C++ Compiler</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md2174"></a>
Example Project</h2>
<p>To get started, follow along the empty example project included in the SDK at <code>&lt;sdk&gt;/examples/pru_io/empty/</code>, documentation at: <a class="el" href="EXAMPLES_PRU_EMPTY.html">Empty Project</a>.</p>
<h2><a class="anchor" id="autotoc_md2175"></a>
Building Project</h2>
<dl class="section note"><dt>Note</dt><dd>The PRU projects need <a href="https://www.ti.com/tool/PRU-CGT">TI-PRU-CGT</a> to compile the sources into executable binary.</dd></dl>
<h1><a class="anchor" id="autotoc_md2176"></a>
PRU-ICSS Driver APIs (- R5F side)</h1>
<p>The following APIs are available for R5F core to initialize, manage and control PRU core. Refer <a class="el" href="DRIVERS_PRUICSS_PAGE.html">PRUICSS</a> for more details. </p>
<h3><a class="anchor" id="autotoc_md2177"></a>
Overview of APIs</h3>
<ul>
<li>Module-level Initialization and Deinitialization<ul>
<li>APIs : <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gadbc52bd3d18cd189cafea5c8dd743d12" title="This function initializes the PRUICSS module.">PRUICSS_init()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga3776ca5f8f753aea784e39f8bfe27ced" title="This function de-initializes the PRUICSS module.">PRUICSS_deinit()</a></code></li>
<li>Called automatically by SysConfig generated code if PRU-ICSS module is instantiated in SysConfig</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gadbc52bd3d18cd189cafea5c8dd743d12" title="This function initializes the PRUICSS module.">PRUICSS_init()</a></code> needs to be called before calling any other APIs</li>
</ul>
</li>
<li>Handle Initialization and Deinitialization<ul>
<li>APIs : <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga62b3134e2272c1f5dfe91c4585a3ba1c" title="This function creates the handle for a PRUICSS instance.">PRUICSS_open()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga01a4c0922eb086154244f30cbae53f77" title="This function deletes the handle for a PRUICSS instance.">PRUICSS_close()</a></code></li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga62b3134e2272c1f5dfe91c4585a3ba1c" title="This function creates the handle for a PRUICSS instance.">PRUICSS_open()</a></code> function creates the handle for a PRUICSS instance. This handle is required for calling other APIs</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga01a4c0922eb086154244f30cbae53f77" title="This function deletes the handle for a PRUICSS instance.">PRUICSS_close()</a></code> is used for deleting the handle</li>
</ul>
</li>
<li>Interrupt Controller Module Initialization<ul>
<li>APIs : <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gacb9fcd2e989376394c0c628ea9ddc39f" title="This function does Interrupt-Channel-host mapping.">PRUICSS_intcInit()</a></code></li>
<li>This function does Interrupt-Channel-Host mapping</li>
<li>The interrupt controller (INTC) module maps interrupts coming from different parts of the device (mapped to PRUICSS instance) to a reduced set of interrupt channels.</li>
<li>More details<ul>
<li>Section in MCU+ SDK Docs : <a href="https://software-dl.ti.com/mcu-plus-sdk/esd/AM64X/08_01_00_36/exports/docs/api_guide_am64x/DRIVERS_PRUICSS_PAGE.html#PRUICSS_INTC">https://software-dl.ti.com/mcu-plus-sdk/esd/AM64X/08_01_00_36/exports/docs/api_guide_am64x/DRIVERS_PRUICSS_PAGE.html#PRUICSS_INTC</a></li>
<li>TRM : Section _"6.4.7 PRU_ICSSG Local INTC"_ in Technical Reference Manual(TRM) of AM64x for more details on INTC module</li>
</ul>
</li>
</ul>
</li>
<li>PRU Core Control â€“ Enable, Disable, Reset<ul>
<li>APIs : <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga38b0b2f969a1f8f6fa7e7d911f07dc71" title="This function enables the PRU.">PRUICSS_enableCore()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga37cdf26e6f52377b9bc2806417c1d201" title="This function disables the PRU.">PRUICSS_disableCore()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga96adaeaa6576f836f15f28052c5d4c3a" title="This function resets the PRU.">PRUICSS_resetCore()</a></code></li>
</ul>
</li>
<li>Memory Management APIs<ul>
<li>APIs : <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga478fd05f7cf75faebfab838587d2131c" title="This function initializes the PRU memory to zero.">PRUICSS_initMemory()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga57ddb3591be2f0adf90894e715e52836" title="This function writes the given data to PRU memory.">PRUICSS_writeMemory()</a></code>, <code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga9472977b7646bf6ec78d4a7d024ecff9" title="This function reads from PRU memory and stores in block of memory.">PRUICSS_readMemory()</a></code></li>
<li>Init API sets the memory to zero</li>
<li>APIs can be used for any of the following memories<ul>
<li>Data RAM0/RAM1</li>
<li>IRAM for PRU0/PRU1/TX_PRU0/TX_PRU1/RTU_PRU0/RTU_PRU1<ul>
<li>Note : This can not be updated if the respective core is enabled</li>
</ul>
</li>
<li>Data RAM2 (Shared RAM)</li>
</ul>
</li>
<li>One example usage is to load the IRAM using the protocol firmware headers provided in .h file format</li>
</ul>
</li>
<li>Event Management APIs<ul>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga33ff83157feb722e1b6c00885f09abe5" title="This function registers an Interrupt Handler for an event.">PRUICSS_registerIrqHandler()</a></code> : This function registers an Interrupt Handler for an event</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga1d9010f5f8fba624bfc9573efe516af0" title="This function generates an INTC event. It should be called only after successful execution of PRUICSS...">PRUICSS_sendEvent()</a></code> : This function generates an INTC event</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga6b36e318ddff2b6c71fd5191f5193663" title="This function waits for a system event to happen. It should be called only after successful execution...">PRUICSS_waitEvent()</a></code> : This function waits for a system event to happen</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gac4586e303eca1f1d11b6a15a49794d26" title="This function clears an INTC event. It should be called only after successful execution of PRUICSS_in...">PRUICSS_clearEvent()</a></code> : This function clears an INTC event</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gaea9241f3bdec3a1a1f2f46f90e50ef70" title="This function generates an INTC event, waits for AINTC event and clears an INTC event.">PRUICSS_sendWaitClearEvent()</a></code> : This function generates an INTC event, waits for INTC event and clears an INTC event</li>
</ul>
</li>
<li>Information APIs<ul>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gae39eca135d889d214b7ad48660c9e635" title="Get PRUICSS version number from ICSSCFG_REVID register.">PRUICSS_getVersion()</a></code> : Get PRUICSS version number from ICSSCFG_REVID register</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gabca806d2831e4e7fb2b420a5fcb41371" title="This API reads the state of efuse bits from ICSSG_HWDIS_REG register.">PRUICSS_readEfuse()</a></code> : Read the state of efuse bits from ICSSG_HWDIS_REG register</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga1374a3a273b5e83f35cfbf34ffc25d14" title="Return PRUICSS attributes.">PRUICSS_getAttrs()</a></code> : Return PRUICSS attributes like base addresses of different modules, their sizes, etc.</li>
</ul>
</li>
<li>Configuration APIs<ul>
<li>IEP:<ul>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga05fe8855f276a2c389307e2b5b31c2f0" title="This API configures the source of the IEP clock to be either IEP CLK as the source or ICSSGn_CORE_CLK...">PRUICSS_setIepClkSrc()</a></code> : Configure the source of the IEP clock to be either IEP CLK as the source or ICSSGn_CORE_CLK</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga80b486cee2cbdc637e825f143464fa69" title="This API enables/disables the counter in IEP module.">PRUICSS_controlIepCounter()</a></code> : Enable/Disable the counter in IEP module</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#gabbf1717f8415f2980d8e662b1831babb" title="This API sets the default increment value for counter in IEP module. This value is used when compensa...">PRUICSS_setIepCounterIncrementValue()</a></code> : Set the default increment value for counter in IEP module</li>
</ul>
</li>
<li>Constant Table:<ul>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga620a82266df17298519b0bbcfc5aa3e7" title="This API updates the constant table for specified constant table entry which have write permissions.">PRUICSS_setConstantTblEntry()</a></code> : Update the constant table for specified constant table entry which have write permissions</li>
</ul>
</li>
<li>Others:<ul>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga813226e8a639a5287d11aab7767f08ee" title="This API sets the GP Mux Select mode for a specific PRU.">PRUICSS_setGpMuxSelect()</a></code> : Set the GP Mux Select mode (GP/EnDat/MII/SD) for a specific PRU</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga658ce5d90a3c1df0e55ae3a1665beaf9" title="This API sets the GPI mode for a specific PRU.">PRUICSS_setGpiMode()</a></code> : Sets the GPI mode for a specific PRU</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga8cb02735364352299599a1a03668ef6f" title="This API sets the G_MUX_EN mux field in ICSSG_SA_MX_REG register.">PRUICSS_setSaMuxMode()</a></code> : Set the G_MUX_EN mux field in ICSSG_SA_MX_REG register</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga0003e93539cda1edf606f7571f88092f" title="This function enables/disables the PRU Cycle Counter for a core.">PRUICSS_configureCycleCounter()</a></code> : Enable/Disable the PRU Cycle Counter for a core</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga2f29c851132abd64aa19913116cca19f" title="This API sets the MII mode in MII_G_RT_ICSS_G_CFG register.">PRUICSS_setIcssCfgMiiMode()</a></code> : Set the MII mode (MII/RGMII/SGMII) in MII_G_RT_ICSS_G_CFG register</li>
<li><code><a class="el" href="group__DRV__PRUICSS__MODULE.html#ga43f30e3770470b0c9b126217a352a48a" title="This API configures the TX FIFO to be used.">PRUICSS_setIcssCfgTxFifo()</a></code> : Configure the TX FIFO (L1/L2) to be used </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
