<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Ethernet TSN gPTP on CPSW along with LwIP stack</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_ENET_CPSW_TSN_LWIP_GPTP.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Ethernet TSN gPTP on CPSW along with LwIP stack </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1134">Introduction</a></li>
<li class="level1"><a href="#autotoc_md1135">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md1136">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md1137">Prerequisites</a></li>
<li class="level2"><a href="#autotoc_md1138">To Configure Static IP</a></li>
<li class="level2"><a href="#autotoc_md1139">Build the example</a></li>
<li class="level2"><a href="#autotoc_md1140">HW Setup</a><ul><li class="level3"><a href="#autotoc_md1141">AM64X-EVM</a><ul><li class="level4"><a href="#autotoc_md1142">For CPSW based example</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md1143">PPS Output</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md1144">Create a network between EVM and host PC</a></li>
<li class="level2"><a href="#autotoc_md1145">Run the example</a></li>
<li class="level2"><a href="#autotoc_md1146">Sample Log Output</a><ul><li class="level3"><a href="#autotoc_md1147">PC Output</a></li>
<li class="level3"><a href="#autotoc_md1148">DUT output</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md1149">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_networking_enet_cpsw_gptp_lwip"></a></p>
<h1><a class="anchor" id="autotoc_md1134"></a>
Introduction</h1>
<p>This ethernet TSN example illustrates the usage of gPTP IEEE 802.1AS stack with CPSW peripheral with LwIP network stack running in parallel. Here we demonstrate a simple TCP echo server using netconn APIs with the LwIP stack. On the gPTP front, the application used here supports all the below modes:</p><ul>
<li>gPTP End-Point time_transmitter mode (i.e. master mode)</li>
<li>gPTP End-Point time_receiver mode (i.e. slave mode)</li>
<li>gPTP Bridge mode</li>
</ul>
<p>In this example, We use two Rx and two Tx DMA channel, one Rx and one Tx channel specific to gPTP traffic and one Rx and one Tx channel specific to non-gPTP traffic, this is handled by LwIP stack.</p>
<p> <style>div.image img[src="gPTPwithLwIP.png"]{width:20%}</style> </p><div class="image">
<img src="gPTPwithLwIP.png" alt=""/>
</div>
<p>Please refer to the <a class="el" href="EXAMPLES_ENET_LWIP_CPSW_TCPSERVER.html">Enet Lwip TCP Server Example on CPSW</a> page for LwIP TCP echo server documentation.</p>
<p>Please refer to the <a class="el" href="EXAMPLES_ENET_CPSW_TSN_GPTP.html">Ethernet TSN gPTP Examples</a> page for the above gPTP mode specific documentation.</p>
<p>See also :<a class="el" href="ENET_CPSW_TSN_GPTP.html">Ethernet TSN and gPTP Stack - API and Integration Guide</a> for gPTP stack documentation.</p>
<h1><a class="anchor" id="autotoc_md1135"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0_freertos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am64x-evm   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/networking/tsn/gptp_lwip_cpsw   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1136"></a>
Steps to Run the Example</h1>
<h2><a class="anchor" id="autotoc_md1137"></a>
Prerequisites</h2>
<ul>
<li>EVM Board</li>
<li>Cat6 ethernet cable</li>
<li>PC with Linux Ubuntu OS (or any PC running bash shell) and PTP capable network card</li>
<li>Install <code>linuxptp</code> <div class="fragment"><div class="line">$ sudo apt-get install linuxptp</div>
<div class="line">$ ptp4l -v</div>
</div><!-- fragment --></li>
<li>Configure linuxptp <div class="fragment"><div class="line">$ wget https://raw.githubusercontent.com/richardcochran/linuxptp/v4.3/configs/gPTP.cfg -O ~/gptp_config.cfg</div>
</div><!-- fragment --> <dl class="section attention"><dt>Attention</dt><dd>Change the value of <code>priority1</code> in ~/gptp_config.cfg file to <code>100</code>, to enforce it to gPTP master</dd>
<dd>
For some network cards, there is a bug with internal propagation delay. So, in those cases you might need to increase the <code>neighborPropDelayThresh</code> in ptp_config.cfg as below-</dd></dl>
<div class="fragment"><div class="line">$ cat ~/gptp_config.cfg</div>
<div class="line">\#</div>
<div class="line">\# 802.1AS example configuration containing those attributes which</div>
<div class="line">\# differ from the defaults.  See the file, default.cfg, for the</div>
<div class="line">/# complete list of available options.</div>
<div class="line">/#</div>
<div class="line">[global]</div>
<div class="line">gmCapable               1</div>
<div class="line">priority1               100</div>
<div class="line">priority2               248</div>
<div class="line">logAnnounceInterval     0</div>
<div class="line">logSyncInterval         -3</div>
<div class="line">syncReceiptTimeout      3</div>
<div class="line">neighborPropDelayThresh 10000</div>
<div class="line">min_neighbor_prop_delay -20000000</div>
<div class="line">assume_two_step         1</div>
<div class="line">path_trace_enabled      1</div>
<div class="line">follow_up_info          1</div>
<div class="line">transportSpecific       0x1</div>
<div class="line">ptp_dst_mac             01:80:C2:00:00:0E</div>
<div class="line">network_transport       L2</div>
<div class="line">delay_mechanism         P2P</div>
</div><!-- fragment --></li>
<li><code>priority1</code> in ~/gptp_config.cfg file can be changed to make the Linux PC master or slave. Lower the number higher the priority to become master.</li>
</ul>
<p>Please refer to the <a class="el" href="EXAMPLES_ENET_LWIP_CPSW_TCPSERVER.html">Enet Lwip TCP Server Example on CPSW</a> page to start a TCP client on PC.</p>
<h2><a class="anchor" id="autotoc_md1138"></a>
To Configure Static IP</h2>
<p>Please refer to <a class="el" href="NETWORKING_LWIP_STATIC_IP.html">Ethernet LwIP TCP/IP Static IP</a>.</p>
<h2><a class="anchor" id="autotoc_md1139"></a>
Build the example</h2>
<ul>
<li>When using CCS projects to build, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li>When using makefiles to build, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1140"></a>
HW Setup</h2>
<dl class="section note"><dt>Note</dt><dd>Make sure you have setup the EVM with cable connections as shown here, <a class="el" href="EVM_SETUP_PAGE.html">EVM Setup</a>. In addition do below steps.</dd></dl>
<h3><a class="anchor" id="autotoc_md1141"></a>
AM64X-EVM</h3>
<h4><a class="anchor" id="autotoc_md1142"></a>
For CPSW based example</h4>
<ul>
<li>Connect a ethernet cable to the EVM from host PC as shown below</li>
</ul>
<p> <style>div.image img[src="am64x_evm_lwip_example_00.png"]{width:30%}</style> </p><div class="image">
<img src="am64x_evm_lwip_example_00.png" alt=""/>
<div class="caption">
Ethernet cable for CPSW based ethernet</div></div>
<h3><a class="anchor" id="autotoc_md1143"></a>
PPS Output</h3>
<p>PPS output is a square wave signal generated by the device. It is used for comparison between the TT (master) and TR( slave) nodes when they are time synchronized. On the device, PPS is generated on the SYNC_OUT signal pin from CPTS (Common Platform Time Synchronization) of CPSW.</p>
<p>Out of box configuration for PPS signal output of this example is as follow:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">EVM  </th><th class="markdownTableHeadNone">Mapped Signal Name  </th><th class="markdownTableHeadNone">SOC Pin Name  </th><th class="markdownTableHeadNone">PPS frequency  </th><th class="markdownTableHeadNone">Output   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">am64x-EVM  </td><td class="markdownTableBodyNone">PRG0_PRU0_GPO17  </td><td class="markdownTableBodyNone">U1  </td><td class="markdownTableBodyNone">3.814 KHz  </td><td class="markdownTableBodyNone">Pin B8 on J2 (i.e PIN8 on J2B) connector   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">am243x-EVM  </td><td class="markdownTableBodyNone">PRG0_PRU0_GPO17  </td><td class="markdownTableBodyNone">U1  </td><td class="markdownTableBodyNone">3.814 KHz  </td><td class="markdownTableBodyNone">Pin B8 on J2 (i.e PIN8 on J2B) connector   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">am243x-LP  </td><td class="markdownTableBodyNone">MMC1_DAT2  </td><td class="markdownTableBodyNone">K20  </td><td class="markdownTableBodyNone">3.814 KHz  </td><td class="markdownTableBodyNone">Pin3 on J6 connector   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">am263x-CC  </td><td class="markdownTableBodyNone">SFDM0_CLK1  </td><td class="markdownTableBodyNone">A16  </td><td class="markdownTableBodyNone">3.814 KHz  </td><td class="markdownTableBodyNone">Pin4 on J6 connector   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">am263x-LP  </td><td class="markdownTableBodyNone">SFDM0_CLK1  </td><td class="markdownTableBodyNone">A16  </td><td class="markdownTableBodyNone">3.814 KHz  </td><td class="markdownTableBodyNone">Pin4 on J6 connector   </td></tr>
</table>
<p>To set/modify configuration of PPS signal , you may follow the below steps:</p>
<ol type="1">
<li>Configure the bitSelect in EnetApp_enableTsSync() function in tsnapp_cpsw_main.c file. If bit n is selected, 2^(n+1) nano seconds is the time period of the square wave. Please note bitSelect starts from bit 17 which corresponds to 3.814 KHz.</li>
<li>Configure pinmux for PPS Output signal under ENET(CPSW)-&gt;'pinmux Config'-&gt;'CPTS0_TS_SYNC(CPTS0_TS_SYNC)' and select the appropriate pin as per your EVM.  <style>div.image img[src="gptp_pps_out_syscfg_gui1.png"]{width:50%}</style> <div class="image">
<img src="gptp_pps_out_syscfg_gui1.png" alt=""/>
<div class="caption">
Figure: Syscfg tool CPSW pinmux changes to select PPS signal pin</div></div>
</li>
<li>Signal is generated on the above configured PIN. You may connect oscilloscope on the pin to visualize and compare. One sample signal captured using oscilloscope. Blue from gPTP TT (master) and purple is from gPTP TR (slave)  <style>div.image img[src="gptp_pps_out_scope_capture.jpg"]{width:50%}</style> <div class="image">
<img src="gptp_pps_out_scope_capture.jpg" alt=""/>
<div class="caption">
Figure: Signal captured on oscilloscope</div></div>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1144"></a>
Create a network between EVM and host PC</h2>
<p>EVM and PC has to connected directly as shown below using CAT6 or CAT5 cable. If there is ethernet switch placed in between, make sure the switch is gPTP capable. Connect both EVM and PC to a DHCP server to get the IP addressess.  <style>div.image img[src="Lwip-gPTP-setup.png"]{width:30%}</style> </p><div class="image">
<img src="Lwip-gPTP-setup.png" alt=""/>
<div class="caption">
Local network between PC and EVM</div></div>
<p>PORT1 instead of PORT0 on EVM can be used as well.</p>
<h2><a class="anchor" id="autotoc_md1145"></a>
Run the example</h2>
<dl class="section attention"><dt>Attention</dt><dd>If you need to reload and run again, a CPU power-cycle is MUST</dd></dl>
<ul>
<li>Execute the below command in PC terminal to start the gPTP on linux: <div class="fragment"><div class="line">$ sudo ptp4l -i eno1 -m -l 6 -q -f ~/gptp_config.cfg</div>
</div><!-- fragment --> Replace eno1 with the network interface connected to your PC.</li>
<li>After the evm gets the IP address, you can ping the IP address to verify the connection.</li>
<li>Execute the below command in PC terminal to start a TCP communication with the EVM. <div class="fragment"><div class="line">ncat &lt;ip-address-of-evm&gt; 8888</div>
</div><!-- fragment --></li>
<li>You will see logs in the UART terminal as shown in the next section. PC side logs are with Intel i210 card.</li>
<li>Launch a CCS debug session and run the example executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>Connect board and PC as mentioned in "HW Setup" above.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1146"></a>
Sample Log Output</h2>
<h3><a class="anchor" id="autotoc_md1147"></a>
PC Output</h3>
<div class="fragment"><div class="line">$ sudo ptp4l -i eno1 -m -l 6 -q -f ~/gptp_config.cfg</div>
<div class="line">ptp4l[7727.045]: selected /dev/ptp0 as PTP clock</div>
<div class="line">ptp4l[7727.088]: port 1: INITIALIZING to LISTENING on INIT_COMPLETE</div>
<div class="line">ptp4l[7727.088]: port 0: INITIALIZING to LISTENING on INIT_COMPLETE</div>
<div class="line">ptp4l[7727.088]: port 1: link down</div>
<div class="line">ptp4l[7727.088]: port 1: LISTENING to FAULTY on FAULT_DETECTED (FT_UNSPECIFIED)</div>
<div class="line">ptp4l[7727.127]: selected local clock 6805ca.fffe.c87ac2 as best master</div>
<div class="line">ptp4l[7727.127]: assuming the grand master role</div>
<div class="line">ptp4l[7729.260]: port 1: link up</div>
<div class="line">ptp4l[7729.300]: port 1: FAULTY to LISTENING on INIT_COMPLETE</div>
<div class="line">ptp4l[7732.330]: port 1: new foreign master f4844c.fffe.fbc042-1</div>
<div class="line">ptp4l[7732.354]: port 1: LISTENING to MASTER on ANNOUNCE_RECEIPT_TIMEOUT_EXPIRES</div>
<div class="line">ptp4l[7732.354]: selected local clock 6805ca.fffe.c87ac2 as best master</div>
<div class="line">ptp4l[7732.354]: assuming the grand master role</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md1148"></a>
DUT output</h3>
<div class="fragment"><div class="line">==================================</div>
<div class="line">  CPSW GPTP LWIP TCP ECHO SERVER </div>
<div class="line">==================================</div>
<div class="line">Enabling clocks!</div>
<div class="line">EnetAppUtils_reduceCoreMacAllocation: Reduced Mac Address Allocation for CoreId:1 From 4 To 2 </div>
<div class="line">Mdio_open:294 </div>
<div class="line">EnetPhy_bindDriver:1828 </div>
<div class="line">EnetPhy_bindDriver:1828 </div>
<div class="line">PHY 3 is alive</div>
<div class="line">PHY 15 is alive</div>
<div class="line">unibase-1.1.4</div>
<div class="line">INF:cbase:tilld0: has mac: F4:84:4C:FB:C0:42</div>
<div class="line">INF:cbase:tilld1: has mac: 00:00:00:00:00:00</div>
<div class="line">Start: uniconf_task</div>
<div class="line">EnetApp_uniconfTask: dbname: NULL</div>
<div class="line">INF:uconf:simpledb_open:no data is imported</div>
<div class="line">INF:uconf:uc_hwal_open:</div>
<div class="line">INF:cbase:cb_rawsock_open:combase-1.1.3</div>
<div class="line">INF:cbase:cb_rawsock_open:dmaTxChId=-1 numRxChannels=0 dmaRxChId=-1 nTxPkts=0 nRxPkts=0 pktSize=0</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:cbase:cb_lld_task_create:alloc stack size=16384</div>
<div class="line">INF:uconf:000000-097424:uniconf_main:uniconf started</div>
<div class="line">EnetApp_gptpYangConfig:domain=0</div>
<div class="line">INF:uconf:get_exmodid_in_db:first xl4gptp:exmodid=0</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_SINGLE_CLOCK_MODE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_USE_HW_PHASE_ADJUSTMENT=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_CLOCK_COMPUTE_INTERVAL_MSEC=100</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_FREQ_OFFSET_IIR_ALPHA_START_VALUE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_FREQ_OFFSET_IIR_ALPHA_STABLE_VALUE=4</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_PHASE_OFFSET_IIR_ALPHA_START_VALUE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_PHASE_OFFSET_IIR_ALPHA_STABLE_VALUE=4</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_MAX_DOMAIN_NUMBER=1</div>
<div class="line">Start: gptp2d_task</div>
<div class="line">EnetApp_initTsn:TSN app start done!</div>
<div class="line">Starting lwIP, local interface IP is dhcp-enabled</div>
<div class="line">[LWIPIF_LWIP] NETIF INIT SUCCESS</div>
<div class="line">Host MAC address-0 : f4:84:4c:fb:c0:42</div>
<div class="line">[0]Enet IF UP Event. Local interface IP:0.0.0.0</div>
<div class="line">[LWIPIF_LWIP] Enet has been started successfully</div>
<div class="line">INF:gptp:gptpman_run:max_domains=1, max_ports=2</div>
<div class="line">INF:cbase:cb_rawsock_open:combase-1.1.3</div>
<div class="line">INF:cbase:cb_rawsock_open:dmaTxChId=1 numRxChannels=1 dmaRxChId=1 nTxPkts=8 nRxPkts=16 pktSize=1536</div>
<div class="line">INF:cbase:rxChId 1 has owner dmaRxShared 0</div>
<div class="line">[0]Waiting for network UP ...</div>
<div class="line">INF:cbase:cbl_query_response:tilld0 link DOWN !!!!</div>
<div class="line">INF:gptp:dev:tilld0 open success</div>
<div class="line">INF:cbase:tilld1: alloc mac: 70:FF:76:1E:3A:07</div>
<div class="line">INF:gptp:dev:tilld1 open success</div>
<div class="line">INF:cbase:cbl_query_response:tilld1 link DOWN !!!!</div>
<div class="line">INF:gptp:gptpnet_init:Open lldtsync OK!</div>
<div class="line">INF:gptp:IEEE1588-2019 performance monitoring disabled.</div>
<div class="line">INF:uconf:ydbi_get_item_ifk3vk0:no data</div>
<div class="line">INF:uconf:ydbi_get_item_ifk3vk0:no data</div>
<div class="line">INF:gptp:onenet_activate:tilld0 status=0, duplex=1, speed=0Mbps</div>
<div class="line">INF:uconf:ydbi_get_item_ifk3vk0:no data</div>
<div class="line">INF:uconf:ydbi_get_item_ifk3vk0:no data</div>
<div class="line">INF:gptp:onenet_activate:tilld1 status=0, duplex=1, speed=0Mbps</div>
<div class="line">INF:ubase:GPTP_MEDIUM_ALLOC: fragsize=16 fragused/fragnum=830/921 (90%)</div>
<div class="line">INF:ubase:GPTP_SMALL_ALLOC: fragsize=4 fragused/fragnum=19/71 (26%)</div>
<div class="line">INF:ubase:SM_DATA_INST: fragsize=8 fragused/fragnum=2002/2002 (100%)</div>
<div class="line">INF:gptp:gptpman_run:GPTPNET_INTERVAL_TIMEOUT_NSEC=125000000</div>
<div class="line">WRN:gptp:gptpgcfg_link_check:can&#39;t read speed</div>
<div class="line"> </div>
<div class="line">INF:gptp:000000-379622:domainIndex=0, GM changed old=00:00:00:00:00:00:00:00, new=F4:84:4C:FF:FE:FB:C0:42</div>
<div class="line">INF:gptp:gptpclock_set_gmsync:gptpInstanceIndex=0, domainIndex=0, gmstate=2</div>
<div class="line">INF:gptp:set_phase_offsetGM:domainIndex=0, New adjustment(New GM?)</div>
<div class="line">[0]Waiting for network UP ...</div>
<div class="line">Cpsw_handleLinkUp:1450 </div>
<div class="line">MAC Port 2: link up</div>
<div class="line">INF:cbase:cbl_query_response:tilld1: link UP, speed=1000, duplex=1 !!!!</div>
<div class="line">[0]Network Link UP Event</div>
<div class="line">INF:gptp:index=2 speed=1000, duplex=full, ptpdev=tilld1</div>
<div class="line">WRN:gptp:000003-251701:waiting_for_pdelay_interval_timer_proc:portIndex=2, sourcePortIdentity=68:05:CA:FF:FE:C8:7A:C2, thisClock=F4:84:4C:FF:FE:FB:C0:42, neighborPropDelay=203</div>
<div class="line">INF:gptp:waiting_for_pdelay_interval_timer_proc:portIndex=2, not asCapable</div>
<div class="line">Cpsw_handleLinkUp:1450 </div>
<div class="line">MAC Port 1: link up</div>
<div class="line">INF:cbase:cbl_query_response:tilld0: link UP, speed=1000, duplex=1 !!!!</div>
<div class="line">INF:gptp:index=1 speed=1000, duplex=full, ptpdev=tilld0</div>
<div class="line">INF:gptp:md_pdelay_resp_sm_recv_req:port=2, set receivedNonCMLDSPdelayReq=1</div>
<div class="line">[0]Waiting for network UP ...</div>
<div class="line">INF:gptp:waiting_for_pdelay_interval_timer_proc:set asCapableAcrossDomains, portIndex=2</div>
<div class="line">INF:gptp:set asCapable for domainIndex=0, portIndex=2</div>
<div class="line">INF:gptp:000004-259132:gptpgcfg_set_asCapable:domainInde=0, portIndex=2, ascapable=1</div>
<div class="line">INF:gptp:000004-266523:gm_stable:gm_unstable_proc:domainIndex=0</div>
<div class="line">INF:gptp:gptpclock_set_gmsync:gptpInstanceIndex=0, domainIndex=0, gmstate=1</div>
<div class="line">NF:gptp:000004-278712:gm_stable:gm_unstable_proc:domainIndex=0</div>
<div class="line">INF:gptp:000004-374156:setSyncTwoStep_txSync:domainIndex=0, portIndex=2, sync gap=4375msec</div>
<div class="line">INF:gptp:000004-379390:setFollowUp_txFollowUp:domainIndex=0, portIndex=2, fup gap=4382msec</div>
<div class="line">INF:gptp:000005-374200:gm_stable:gm_stable_proc:domainIndex=0</div>
<div class="line">INF:gptp:gptpclock_set_gmsync:gptpInstanceIndex=0, domainIndex=0, gmstate=2</div>
<div class="line">[0]Waiting for network UP ...</div>
<div class="line">INF:gptp:000006-344047:domainIndex=0, GM changed old=F4:84:4C:FF:FE:FB:C0:42, new=68:05:CA:FF:FE:C8:7A:C2</div>
<div class="line">INF:gptp:gptpclock_set_gmsync:gptpInstanceIndex=0, domainIndex=0, gmstate=0</div>
<div class="line">INF:gptp:000006-357144:gm_stable:gm_unstable_proc:domainIndex=0</div>
<div class="line">INF:gptp:gptpclock_set_gmsync:gptpInstanceIndex=0, domainIndex=0, gmstate=1</div>
<div class="line">INF:gptp:set_phase_offsetGM:domainIndex=0, New adjustment(New GM?)</div>
<div class="line">INF:gptp:set_phase_offsetGM:domainIndex=0, offset adjustment, diff=1754370932</div>
<div class="line">INF:gptp:set_phase_offsetGM:domainIndex=0, stable</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 3156ppb, GMdiff=9781nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 5707ppb, GMdiff=9794nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 7727ppb, GMdiff=9742nsec</div>
<div class="line">................</div>
<div class="line">...............</div>
<div class="line">[0]Enet IF UP Event. Local interface IP:192.168.1.10</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 4291ppb, GMdiff=12nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 4264ppb, GMdiff=-2nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 4222ppb, GMdiff=-21nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to 4189ppb, GMdiff=-34nsec</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1149"></a>
See Also</h1>
<p><a class="el" href="NETWORKING.html">Ethernet And Networking</a> | <a class="el" href="EXAMPLES_ENET_CPSW_TSN_GPTP_BRIDGE.html">Ethernet TSN CPSW gPTP Bridge Example</a> | <a class="el" href="EXAMPLES_ENET_CPSW_TSN_GPTP_TR.html">Ethernet TSN CPSW gPTP TimeReceiver (gPTP Slave) Example</a> | <a class="el" href="EXAMPLES_ENET_CPSW_TSN_GPTP_TT.html">Ethernet TSN CPSW gPTP TimeTransmitter (gPTP Master) Example</a> | <a class="el" href="ENET_CPSW_TSN_GPTP.html">Ethernet TSN and gPTP Stack - API and Integration Guide</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
