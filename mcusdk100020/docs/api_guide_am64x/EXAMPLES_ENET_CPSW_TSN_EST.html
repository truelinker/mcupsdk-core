<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Ethernet TSN EST Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM64x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">10.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_ENET_CPSW_TSN_EST.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Ethernet TSN EST Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1150">Introduction</a></li>
<li class="level1"><a href="#autotoc_md1151">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md1152">Constraints</a></li>
<li class="level1"><a href="#autotoc_md1153">Configuration Parameters</a></li>
<li class="level1"><a href="#autotoc_md1154">Expected Behavior</a></li>
<li class="level1"><a href="#autotoc_md1155">Application Integration Guide</a></li>
<li class="level1"><a href="#autotoc_md1156">Yang Configuration for 802.1Qbv</a></li>
<li class="level1"><a href="#autotoc_md1157">Build Enet TSN EST Example</a></li>
<li class="level1"><a href="#autotoc_md1158">HW Setup</a></li>
<li class="level1"><a href="#autotoc_md1159">Running Enet TSN EST example</a></li>
<li class="level1"><a href="#autotoc_md1160">Note</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_networking_enet_cpsw_tsn_est_example"></a></p>
<h1><a class="anchor" id="autotoc_md1150"></a>
Introduction</h1>
<p>This example application demonstrates how to configure the IEEE 802.1 Qbv (EST) through our TSN yang interface.</p>
<p>The yang interface in the TSN is governed by a module called uniconf which runs as a daemon. Any application which interacts with the uniconf is called as a uniconf client. The uniconf client configures 802.1 Qbv by opening yang database (DB), write config yang parameters to DB and triggers the uniconf for reading parameters from DB and writing to HW. The uniconf reads or writes parameters from or to HW by calling Enet LLD driver.</p>
<p>Please note that the file system support is not yet integrated to ethernet examples.</p>
<p>In this example, we configure the talker DUT to send out traffic as per the EST schedule and the listner DUT or device can verify the time-slots of the received packets.</p>
<dl class="section note"><dt>Note</dt><dd>Host based receive packet time-stamping is enabled to estimate the packet reception timing accuracy, on the listener side.However, note we have a HW errata i2401 regarding this feature and hence host based rx packet timestamping feature should be disabled in production code.</dd></dl>
<p>See also : <a class="el" href="EXAMPLES_ENET_CPSW_EST.html">Enet CPSW EST Example</a>, <a class="el" href="ENET_CPSW_TSN_GPTP.html">Ethernet TSN and gPTP Stack - API and Integration Guide</a></p>
<h1><a class="anchor" id="autotoc_md1151"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0_freertos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am64x-evm   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/networking/tsn/est_cpsw_app   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1152"></a>
Constraints</h1>
<ul>
<li>This application only enables one MAC port which has the interface name <em>tilld0</em>. This interface is mapped to Mac port 1 for all MCU devices. To change default Mac port for this example, please change the macro <em>DEFAULT_INTERFACE_INDEX</em> from <em>qosapp_misc.h</em> from 0 another value (1, 2, 3).</li>
<li>The application can be only run as talker, listener or bridge mode depending on <br  />
 input characters from UART terminal. (t: talker, l: listener; b: bridge mode)</li>
<li>Num of streams on talker is 2 with traffic priorities 0 and 2 mapped to HW queue 0 and 2 respectively. Num of streams and priority can be changed by modifying the <em>gEnetEstAppTestLists</em> from the est_init.c.</li>
<li>Both talker and listener need to apply the same EST schedule with the same <em>baseTime</em> to have accurate test results. Thus, there is a <em>delayOffset</em> added to the <em>baseTime</em> of the EST's AdminList so that both schedules can be applied in the future and at the same time.</li>
<li>The EST schedule should be applied and talker starts sending test traffic after PTP synchronization is in good condition to have accurate test results.</li>
<li>The talker sends dummy data which is encapsulated in an AVTP packet. Packet sent with VLAN ID 110.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1153"></a>
Configuration Parameters</h1>
<ul>
<li>Default mac port can be changed by modifying the <code>DEFAULT_INTERFACE_INDEX</code> from the <code>qosapp_misc.h</code>.</li>
<li><p class="startli">EST Schedule (Input parameters)</p>
<table class="doxtable">
<caption>Gate control list </caption>
<tr>
<th>Gate Control</th><th>Time Interval </th></tr>
<tr>
<td><code>oCCCCCCo</code> </td><td>62 usecs </td></tr>
<tr>
<td><code>oCooCoCC</code> </td><td>62 usecs </td></tr>
<tr>
<td><code>oCCCCCCo</code> </td><td>62 usecs </td></tr>
<tr>
<td><code>oCCCCoCC</code> </td><td>62 usecs </td></tr>
</table>
</li>
</ul>
<p>Each of the 8 gates (one per priority) can be in one of two states:</p><ul>
<li><em>Open</em>: Frames in the corresponding queue can be selected for transmission. This is represented by '<code>o</code>' in the <em>Gate Control</em> column of previous table.</li>
<li><p class="startli"><em>Closed</em>: Frames in the corresponding queue are not selected for transmission. This is represented by '<code>C</code>' in the <em>Gate Control</em> column.</p>
<p class="startli">The <em>priority</em> being referred to in the EST schedule described above corresponds to the CPSW destination port hardware <em>switch priority</em>. For VLAN tagged packets that ingress through CPSW host port, the hardware switch priority can be determined by either the CPPI channel number (<code>P0_RX_REMAP_VLAN = 0</code>) or the packet priority value from the VLAN tag (<code>P0_RX_REMAP_VLAN = 1</code>).</p>
</li>
<li>The EST schedule is 248us long and it is composed of 4 intervals, each with a gate mask that enables transmission of 2 priorities. PTP traffic can be sent on any non-zero priority. Here we are using the priority 7 for PTP traffic. The gate of this priority is always opened to make sure there is no interruption of the PTP packet which keeps the PTP in good synchronization status. The remaining priorities are for test traffic (avtp packets).</li>
</ul>
<table class="doxtable">
<tr>
<th>Parameters</th><th>TimeValue </th></tr>
<tr>
<td>baseTime </td><td><code>((Current PTP Time + delayOffset)/delayOffset)*delayOffset</code> </td></tr>
<tr>
<td>cycleTime </td><td>248us </td></tr>
</table>
<p><b>Where</b></p>
<ul>
<li><code>baseTime</code>: PTP time round-off to the <code>delayOffset</code> to have the same both <code>baseTime</code> on talker and listener to apply the EST schedule that the same time in the future.</li>
<li><code>delayOffset</code>: added time to current PTP time for <code>baseTime</code> to apply the schedule in the future. It should be a multiple of the <code>cycleTime</code> and large enough so that user can have enough time to start talker and listener by entering a character to UART terminal. The current <code>delayOffset</code> is <code>100000*cycleTime</code> = 24800000us (24.8 seconds). The factor '100000' is chosen to have <code>delayOffset</code> above 20secs.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1154"></a>
Expected Behavior</h1>
<ul>
<li>With the schedule configured above, the expectation is that<ul>
<li>all priority 0 packets arrive on listener inside the time windows <table class="doxtable">
<tr>
<td>0&ndash;62us </td><td>124us&ndash;186us </td></tr>
</table>
</li>
<li>all priority 2 packets arrive on listener inside the time windows <table class="doxtable">
<tr>
<td>62us&ndash;124us </td><td>186us&ndash;248us </td></tr>
</table>
</li>
<li>To check whether packets received inside a time window, the rx timestamp, called rxts (PTP time) of each received packet is captured by host port on the listener's side. Then the <code>timeSlot</code> of each packet is calculated using the following formula:</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">timeSlot = (rxts - BaseTime)%CycleTime</div>
</div><!-- fragment --><p>The <em>timeSlot</em> is compared with the time windows above for each packet to check whether the packet received inside or outside the expected time windows. The EST works when percentage of packets received outside of expected time windows less than or equal 1%.</p>
<h1><a class="anchor" id="autotoc_md1155"></a>
Application Integration Guide</h1>
<p>The EST application needs to run with the gPTP and yang configuration daemon. Therefore, the gPTP and uniconf must be run during initializing the application. To register the EST application to the initializer of the TSN App for running after the gPTP and uniconf, add the following line to the <em>EnetApp_initTsnByCfg</em> of the tsninit.c</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef EST_APP_ENABLED</span></div>
<div class="line"><span class="keywordflow">if</span> (res == 0)</div>
<div class="line">{</div>
<div class="line">    res = EnetApp_addEstAppModCtx(gModCtxTable);</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif //EST_APP_ENABLED</span></div>
</div><!-- fragment --><p>Then the EST application will be started when the <code>EnetApp_startTsn</code> is called.</p>
<h1><a class="anchor" id="autotoc_md1156"></a>
Yang Configuration for 802.1Qbv</h1>
<ul>
<li>Yang file for the 802.1Qbv is defined at <code>standard/ieee/draft/802.1/Qcw/ieee802-dot1q-sched-bridge.yang</code> and <code>standard/ieee/draft/802.1/Qcw/ieee802-dot1q-sched.yang</code> from the <a href="https://github.com/YangModels/yang.git">https://github.com/YangModels/yang.git</a></li>
<li>Enet-lld supports to configure the <code>admin-control-list</code>, <code>baseTime</code> (<code>admin-base-time</code>) and cycleTime (<code>admin-cycle-time</code>), this section describes the parameters of the <code>admin-control-list</code> Here are parameters of the <code>admin-control-list</code> after converting parameters from yang to to xml</li>
</ul>
<div class="fragment"><div class="line">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</div>
<div class="line">&lt;data xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;&gt;</div>
<div class="line">  &lt;interfaces xmlns=&quot;urn:ietf:params:xml:ns:yang:ietf-interfaces&quot;&gt;</div>
<div class="line">    &lt;interface&gt;</div>
<div class="line">      &lt;name/&gt;</div>
<div class="line">      &lt;bridge-port xmlns=&quot;urn:ieee:std:802.1Q:yang:ieee802-dot1q-bridge&quot;&gt;</div>
<div class="line">        &lt;traffic-class&gt;</div>
<div class="line">          &lt;traffic-class-table&gt;</div>
<div class="line">            &lt;number-of-traffic-classes/&gt;</div>
<div class="line">            &lt;priority0/&gt;</div>
<div class="line">            ...</div>
<div class="line">            &lt;priority7/&gt;</div>
<div class="line">          &lt;/traffic-class-table&gt;</div>
<div class="line">          &lt;tc-data&gt;</div>
<div class="line">            &lt;tc/&gt;</div>
<div class="line">            &lt;lqueue/&gt;</div>
<div class="line">            ...</div>
<div class="line">          &lt;/tc-data&gt;</div>
<div class="line">          &lt;number-of-pqueues/&gt;</div>
<div class="line">          &lt;pqueue-map&gt;</div>
<div class="line">            &lt;pqueue/&gt;</div>
<div class="line">            &lt;lqueue/&gt;</div>
<div class="line">          &lt;/pqueue-map&gt;</div>
<div class="line">        &lt;/traffic-class&gt;</div>
<div class="line">        &lt;gate-parameter-table xmlns=&quot;urn:ieee:std:802.1Q:yang:ieee802-dot1q-sched-bridge&quot;&gt;</div>
<div class="line">          &lt;gate-enabled&gt;&lt;/gate-enabled&gt;</div>
<div class="line">          &lt;admin-control-list&gt;</div>
<div class="line">            &lt;gate-control-entry&gt;</div>
<div class="line">              &lt;index/&gt;</div>
<div class="line">              &lt;operation-name/&gt;</div>
<div class="line">              &lt;time-interval-value/&gt;</div>
<div class="line">              &lt;gate-states-value/&gt;</div>
<div class="line">            &lt;/gate-control-entry&gt;</div>
<div class="line">          &lt;/admin-control-list&gt;</div>
<div class="line">          &lt;admin-cycle-time&gt;</div>
<div class="line">            &lt;numerator/&gt;</div>
<div class="line">            &lt;denominator/&gt;</div>
<div class="line">          &lt;/admin-cycle-time&gt;</div>
<div class="line">          &lt;admin-base-time&gt;</div>
<div class="line">            &lt;seconds/&gt;</div>
<div class="line">            &lt;nanoseconds/&gt;</div>
<div class="line">          &lt;/admin-base-time&gt;</div>
<div class="line">        &lt;/gate-parameter-table&gt;</div>
<div class="line">      &lt;/bridge-port&gt;</div>
<div class="line">    &lt;/interface&gt;</div>
<div class="line">  &lt;/interfaces&gt;</div>
<div class="line">&lt;/data&gt;</div>
</div><!-- fragment --><ul>
<li><p class="startli">All the supported parameters for 802.1Qbv are from yang standard except the mechanism for mapping traffic class and HW queue are augmented. To configure all parameters of 802.1Qbv above, application calls the <code>yang_db_runtime_put_oneline</code> to write data to DB. After all required parameters written to the DB, application trigger the uniconf by writing the <code>/ietf-interfaces/interfaces/interface|name:tilld0/bridge-port/gate-parameter-table/gate-enabled</code> so that the uniconf writes parameters to HW. See <code>EnetEstApp_setAdminControlList</code> of the <code>est_init.c</code> for yang configuration.</p>
<p class="startli">Note The network interface <code>tilld0</code> is default network interface name, name of network interface can be changed by changing default Mac port configured for the example.</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1157"></a>
Build Enet TSN EST Example</h1>
<p>Refer <a class="el" href="EXAMPLES_ENET_CPSW_TSN_GPTP.html">Ethernet TSN gPTP Examples</a> to build the enet_cpsw_tsn_est_example</p>
<h1><a class="anchor" id="autotoc_md1158"></a>
HW Setup</h1>
<p>Make sure you have setup the EVM with cable connections as shown in <a class="el" href="EVM_SETUP_PAGE.html">EVM Setup</a>. In addition, follow the steps in the next section.</p>
<dl class="section note"><dt>Note</dt><dd>Ethernet cable must be connected and link must be up in order for the example application to continue execution.</dd></dl>
<h1><a class="anchor" id="autotoc_md1159"></a>
Running Enet TSN EST example</h1>
<ul>
<li><p class="startli">HW devices configuration</p>
<p class="startli">Connect two MCUs directly through the MAC port 1.</p>
</li>
</ul>
<div class="fragment"><div class="line">[MCU#1 (talker)]&lt;----------------&gt;[PC or MCU#2 (Listener)]</div>
</div><!-- fragment --><ul>
<li>Please note that if you want to perform verification on listener side, listener device should be capable of time-stamping all receive packets.</li>
<li>Launch a CCS debug session, load and run the example executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>The talker or listener can be run on GM or Slave, whichever devices you choose. However, we recommend running the talker on the Slave device and listener on the GM. The reason for that is the slave device needs to be adjusted PTP time to sync with the GM. Hence, there is a higher possibility that EST use case will fail due to PTP synchronization issue than running the talker on the GM. After running both devices, the PTP slave device is the one which shows the following debug log on UART</li>
</ul>
<div class="fragment"><div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to -14648ppb, GMdiff=-24nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to -14666ppb, GMdiff=-30nsec</div>
<div class="line">IFV:gptp:domainIndex=0, clock_master_sync_receive:the master clock rate to -14645ppb, GMdiff=-15nsec</div>
</div><!-- fragment --><ul>
<li>When the abs(GMdiff) is below 1000ns, it is a good time to start the EST usecase.</li>
<li>Start the listener. On the GM device, press <code>l</code> to start a listener. It will show log on UART terminal as follows</li>
</ul>
<div class="fragment"><div class="line">TimeSlots of PacketPriority: 0:   [0, 62000]ns,  [124000, 186000]ns,</div>
<div class="line">TimeSlots of PacketPriority: 2:   [62000, 124000]ns,  [186000, 248000]ns,</div>
<div class="line">The following AdminList param will be configured for EST:</div>
<div class="line">GateMask[7..0]=oCCCCCCo (0x81), start=0 ns, end=61999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=62000 ns, end=123999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCo (0x81), start=124000 ns, end=185999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=186000 ns, end=247999 ns, dur=62000 ns</div>
<div class="line">Base time=74400000000ns,Cycle time=248000ns</div>
<div class="line">INF:cbase:Successfully configure TAS</div>
<div class="line">INF:cbase:LLDEnetFilter:destmac:91:E0:F0:00:FE:00, vlanId:110, ethType:0x22f0</div>
</div><!-- fragment --><ul>
<li><p class="startli">Start the talker right after the listener.</p>
<p class="startli">On the slave device, press <code>t</code> to start a talker, It will show log on UART terminal as follows</p>
</li>
</ul>
<div class="fragment"><div class="line">GateMask[7..0]=oCCCCCCo (0x81), start=0 ns, end=61999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=62000 ns, end=123999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCo (0x81), start=124000 ns, end=185999 ns, dur=62000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=186000 ns, end=247999 ns, dur=62000 ns</div>
<div class="line">Base time=74400000000ns,Cycle time=248000ns</div>
<div class="line">INF:cbase:Successfully configure TAS</div>
</div><!-- fragment --><ul>
<li>The test result will have the best accuracy if the <em>Base time</em> is the same for both talker and listener. To achieve that, we need to start the talker (press <em>t</em>) right after pressing <em>l</em> on the listener.</li>
<li>After starting the talker, it will start sending traffic after the EST schedule takes effect (around 20 seconds).</li>
<li>Observe test result The number of packets received inside expected time windows are called good packets and outside the expected time windows are bad packets. Press <em>d</em> on the UART terminal of the listener to display number of good/bad packets and the percentage of the bad packets. The expected result is as follows</li>
</ul>
<div class="fragment"><div class="line">Presss d</div>
<div class="line">PacketPriority: 0, nGoodPackets: 10731108, nBadPackets: 88858, percentage of bad packets: 0%</div>
<div class="line">PacketPriority: 2, nGoodPackets: 15960287, nBadPackets: 131973, percentage of bad packets: 0%</div>
<div class="line">CPU Load: 39%</div>
<div class="line">Press d</div>
<div class="line">PacketPriority: 0, nGoodPackets: 10733815, nBadPackets: 88880, percentage of bad packets: 0%</div>
<div class="line">PacketPriority: 2, nGoodPackets: 15964301, nBadPackets: 132010, percentage of bad packets: 0%</div>
<div class="line">Press d</div>
<div class="line">PacketPriority: 0, nGoodPackets: 10736486, nBadPackets: 88901, percentage of bad packets: 0%</div>
<div class="line">PacketPriority: 2, nGoodPackets: 15968259, nBadPackets: 132056, percentage of bad packets: 0%</div>
</div><!-- fragment --><p>The expected percentage of bad packets is 0-1%.</p>
<h1><a class="anchor" id="autotoc_md1160"></a>
Note</h1>
<ul>
<li>The gPTP log will help to identify which HW device is a slave device. In case that log is not needed or noisy, please suppress them by changing the <em>gptp:66</em> to <em>gptp:55</em> in the enet_tsn/enet_tsn_est_example/makefile.</li>
<li>If the <em>percentage of bad packets</em> is greater than 1%, please check the <em>GMdiff</em> from the gPTP log of the slave device mentioned above, the expected <em>GMdiff</em> less than 1000ns. The EST use case only works when PTP synchronization is in good condition. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
